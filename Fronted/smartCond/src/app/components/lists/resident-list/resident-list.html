<div class="dashboard-container">
  <div class="main-content">

    <!-- HEADER -->
    <div class="top-header">
      <button class="back-btn" (click)="goBack()" style="border: none; background: transparent; cursor: pointer;">
        <svg width="26" height="33" viewBox="0 0 26 33" fill="none">
          <path d="M24 2L4 17.3826L24 31" stroke="#5D4F4F" stroke-width="4" stroke-linecap="round"/>
        </svg>
      </button>
      <h2 style="color: #2f6e41; margin-left: 10px;">GestiÃ³n de Residentes</h2>
    </div>

    <div class="content-sections">
      <div class="left-content" style="width: 100%;">
        <div class="section">

          <!-- TITLE + BUTTON -->
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 class="section-title">Listado de Residentes</h3>
            <button class="create-btn" [routerLink]="['/registro-residente']">Crear cuenta</button>
          </div>

          <!-- SEARCH -->
          <input
            type="text"
            placeholder="Buscar por nombre, documento, email o telÃ©fono..."
            [(ngModel)]="searchTerm"
            (input)="filterResidents()"
            class="search-input"
            style="width: 100%; margin-bottom: 15px; padding: 10px; border: 1px solid #ccc; border-radius: 8px;"
          />

          <div class="section-content">

            <!-- LOADING -->
            <div *ngIf="isLoading" style="text-align: center; padding: 20px;">
              <p>Cargando lista de usuarios...</p>
            </div>

            <!-- DESKTOP TABLE -->
            <table class="data-table desktop-only" *ngIf="!isLoading">
              <thead>
                <tr>
                  <th>Nombre Completo</th>
                  <th>Documento</th>
                  <th>Email</th>
                  <th>TelÃ©fono</th>
                  <th>Apartamento</th>
                  <th>Acciones</th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let resident of filteredResidents">
                  <td>{{ resident.name }} {{ resident.lastName }}</td>
                  <td>{{ resident.document }}</td>
                  <td>{{ resident.email }}</td>
                  <td>{{ resident.phoneNumber }}</td>
                  <td>{{ resident.apartment }}</td>

                  <td style="display: flex; gap: 10px;">
                    <button [routerLink]="['/editar-residentes', resident.id]" class="action-btn edit-btn" title="Editar">âœï¸</button>
                    <button (click)="onDelete(resident.id)" class="action-btn delete-btn" title="Eliminar">ğŸ—‘ï¸</button>
                  </td>
                </tr>

                <tr *ngIf="filteredResidents.length === 0">
                  <td colspan="6" style="text-align: center;">No se encontraron resultados.</td>
                </tr>

              </tbody>
            </table>

            <!-- MOBILE STACKED CARDS -->
            <div class="mobile-only">

              <div class="card" *ngFor="let resident of filteredResidents">

                <div class="card-row"><strong>Nombre:</strong> {{ resident.name }} {{ resident.lastName }}</div>
                <div class="card-row"><strong>Documento:</strong> {{ resident.document }}</div>
                <div class="card-row"><strong>Email:</strong> {{ resident.email }}</div>
                <div class="card-row"><strong>TelÃ©fono:</strong> {{ resident.phoneNumber }}</div>
                <div class="card-row"><strong>Apartamento:</strong> {{ resident.apartment }}</div>

                <div class="card-actions">
                  <button [routerLink]="['/editar-residentes', resident.id]" class="action-btn edit-btn">âœï¸</button>
                  <button (click)="onDelete(resident.id)" class="action-btn delete-btn">ğŸ—‘ï¸</button>
                </div>

              </div>

              <div *ngIf="filteredResidents.length === 0" style="text-align: center; padding: 20px;">
                No se encontraron resultados.
              </div>

            </div>

          </div>
        </div>
      </div>
    </div>

  </div>
</div>
